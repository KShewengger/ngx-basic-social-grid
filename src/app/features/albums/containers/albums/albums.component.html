<div class="wrapper">
  <mat-card class="wrapper-card">
    <mat-card-header>
      <p class="wrapper-header">
        <span class="wrapper-header__title">Albums</span>
        <span class="wrapper-header__total">({{totalFilteredAlbums()}})</span>
      </p>
    </mat-card-header>

    <mat-card-content>
      <div class="wrapper-content">
        <div class="wrapper-form">
          <input
            type="text"
            placeholder="Search"
            class="wrapper-form__search"
            #searchInput
            (input)="handleSearch(searchInput.value)"
          />
        </div>
      </div>

      <div class="grid grid-cols-2 sm:grid-cols-3 gap-6 my-8">
        @for(album of paginatedAlbums(); track album.id) {
          <sg-album
            [id]="album.id"
            (click)="openedAlbum.set(album)"
          />
        }
      </div>
    </mat-card-content>

    <mat-paginator
      showFirstLastButtons
      hidePageSize
      class="!flex !justify-center"
      [length]="totalFilteredAlbums()"
      [pageIndex]="pageIndex()"
      [pageSize]="pageSize"
      (page)="pageEvent.set($event);"/>
  </mat-card>
</div>

<sg-drawer
  [open]="!!openedAlbum()"
  (openChange)="openedAlbum.set(null)"
>
  @if (openedAlbum()) {
    Hi
  }
</sg-drawer>
