<div class="wrapper">
  <mat-card class="wrapper-card">
    <mat-card-header>
      <p class="flex items-center gap-1">
        <span class="text-xl font-bold">Posts</span>
        <span class="text-xs text-secondary-500">({{totalFilteredPosts()}})</span>
      </p>
    </mat-card-header>

    <mat-card-content>
      <div class="wrapper-content">
        <div class="wrapper-form">
          <input
            type="text"
            placeholder="Search"
            class="wrapper-form__search"
            #searchInput
            (input)="search.set(searchInput.value)"
          />
        </div>

        <div class="wrapper-table">
          <table
            mat-table
            matSort
            [dataSource]="paginatePosts() | sgSortDataByProp: sortEvent()"
            (matSortChange)="sortEvent.set($event)"
          >
            <ng-container matColumnDef="title">
              <th
                mat-header-cell
                mat-sort-header
                class="wrapper-table__header"
                *matHeaderCellDef
              >
                Title
              </th>

              <td
                mat-cell
                class="wrapper-table__value"
                *matCellDef="let element"
              >
                {{element.title}}
              </td>
            </ng-container>

            <ng-container matColumnDef="body">
              <th
                mat-header-cell
                mat-sort-header
                class="wrapper-table__header"
                *matHeaderCellDef>
                Body
              </th>

              <td
                mat-cell
                class="wrapper-table__value"
                *matCellDef="let element">
                {{element.body}}
              </td>
            </ng-container>

            <ng-container matColumnDef="avatar">
              <th
                mat-header-cell
                class="wrapper-table__header"
                *matHeaderCellDef>
                &nbsp;
              </th>

              <td
                mat-cell
                *matCellDef="let element">
                <span
                  class="wrapper-table__avatar"
                  matTooltipClass="!block xl:!hidden !capitalize"
                  [matTooltip]="element.user?.name"
                >{{ element.user?.name | sgExtractUserInitials }}</span>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr
              mat-row
              class="wrapper-table__row"
              *matRowDef="let row; columns: displayedColumns;"
            ></tr>
          </table>

          <mat-paginator
            showFirstLastButtons
            hidePageSize
            [length]="totalFilteredPosts()"
            [pageSize]="pageSize"
            (page)="pageEvent.set($event)"/>
        </div>
     </div>
    </mat-card-content>
  </mat-card>
</div>
